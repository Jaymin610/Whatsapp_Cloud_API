{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="{% static 'assets/img/whatsapp.png' %}">
  <title>Whatsapp Chat</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{% static 'style.css' %} ">
   
</head>

<body>
  <!-- partial:index.partial.html -->
  <div class="app-container">
    <div class="app-left">
      <div class="app-left-header">
        <div class="app-logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <defs />
            <path class="path-1" fill="#3eb798"
              d="M448 193.108h-32v80c0 44.176-35.824 80-80 80H192v32c0 35.344 28.656 64 64 64h96l69.76 58.08c6.784 5.648 16.88 4.736 22.528-2.048A16.035 16.035 0 00448 494.868v-45.76c35.344 0 64-28.656 64-64v-128c0-35.344-28.656-64-64-64z"
              opacity=".4" />
            <path class="path-2" fill="#3eb798"
              d="M320 1.108H64c-35.344 0-64 28.656-64 64v192c0 35.344 28.656 64 64 64v61.28c0 8.832 7.168 16 16 16a16 16 0 0010.4-3.84l85.6-73.44h144c35.344 0 64-28.656 64-64v-192c0-35.344-28.656-64-64-64zm-201.44 182.56a22.555 22.555 0 01-4.8 4 35.515 35.515 0 01-5.44 3.04 42.555 42.555 0 01-6.08 1.76 28.204 28.204 0 01-6.24.64c-17.68 0-32-14.32-32-32-.336-17.664 13.712-32.272 31.376-32.608 2.304-.048 4.608.16 6.864.608a42.555 42.555 0 016.08 1.76c1.936.8 3.76 1.808 5.44 3.04a27.78 27.78 0 014.8 3.84 32.028 32.028 0 019.44 23.36 31.935 31.935 0 01-9.44 22.56zm96 0a31.935 31.935 0 01-22.56 9.44c-2.08.24-4.16.24-6.24 0a42.555 42.555 0 01-6.08-1.76 35.515 35.515 0 01-5.44-3.04 29.053 29.053 0 01-4.96-4 32.006 32.006 0 01-9.28-23.2 27.13 27.13 0 010-6.24 42.555 42.555 0 011.76-6.08c.8-1.936 1.808-3.76 3.04-5.44a37.305 37.305 0 013.84-4.96 37.305 37.305 0 014.96-3.84 25.881 25.881 0 015.44-3.04 42.017 42.017 0 016.72-2.4c17.328-3.456 34.176 7.808 37.632 25.136.448 2.256.656 4.56.608 6.864 0 8.448-3.328 16.56-9.28 22.56h-.16zm96 0a22.555 22.555 0 01-4.8 4 35.515 35.515 0 01-5.44 3.04 42.555 42.555 0 01-6.08 1.76 28.204 28.204 0 01-6.24.64c-17.68 0-32-14.32-32-32-.336-17.664 13.712-32.272 31.376-32.608 2.304-.048 4.608.16 6.864.608a42.555 42.555 0 016.08 1.76c1.936.8 3.76 1.808 5.44 3.04a27.78 27.78 0 014.8 3.84 32.028 32.028 0 019.44 23.36 31.935 31.935 0 01-9.44 22.56z" />
          </svg>
        </div>
        <h1>QuickChat</h1>
      </div>
      <div class="app-profile-box">
        <img
          src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2250&q=80"
          alt="profile">
        <div class="app-profile-box-name">
          {{provider}}
          <button class="app-setting">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="currentColor"
              stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-settings"
              viewBox="0 0 24 24">
              <defs />
              <circle cx="12" cy="12" r="3" />
              <path
                d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
            </svg>
          </button>
        </div>
        <!-- <p class="app-profile-box-title">UI Designer</p> -->
        <div class="switch-status">
          <input type="checkbox" onclick="printsome()" name="switchStatus" id="switchStatus" checked>
          <label class="label-toggle" for="switchStatus"></label>
          <span class="toggle-text toggle-online">Online</span>
          <span class="toggle-text toggle-offline">Offline</span>
        </div>
      </div>
      <div class="chat-list-wrapper">
        <div class="chat-list-header">Active Conversations <span class="c-number"></span>
          <svg class="list-header-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
            stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
            class="feather feather-chevron-up" viewBox="0 0 24 24">
            <defs />
            <path d="M18 15l-6-6-6 6" />
          </svg>
        </div>
        <ul class="chat-list active">
          {% for n in act_users %}
          <a href="/what_gui?to={{ n.sender_number }}&from={{n.reply_number}}"><li class="chat-list-item {{n.active}}">
            <img
              src="https://images.unsplash.com/photo-1566465559199-50c6d9c81631?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=934&q=80"
              alt="chat">
            <span class="chat-list-name">
                {{ n.sender_number }}</span>
            </li>
          </a>
          {% endfor %}
        </ul>
      </div>
      <div class="chat-list-wrapper">
        <div class="chat-list-header active">Achived Conversations <span class="c-number"></span>
          <svg class="list-header-arrow" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none"
            stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
            class="feather feather-chevron-up" viewBox="0 0 24 24">
            <defs />
            <path d="M18 15l-6-6-6 6" />
          </svg>
        </div>
        <ul class="chat-list">
          {% for aru in arc_users %}
          <a href="/what_gui?to={{ aru.sender_number }}&from={{aru.reply_number}}">
            <li class="chat-list-item">
            <img
              src="https://images.unsplash.com/photo-1542042457485-a4c7afd74cd5?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1270&q=80"
              alt="chat">
            <span class="chat-list-name">
              {{ aru.sender_number }}</span>
            </li>
          </a>
          {% endfor %}
        </ul>
      </div>
    </div>
    <div class="app-main">
      <div class="chat-wrapper">
        {% for t, s in time_data.items %}
        <div class="message-wrapper">
          <img class="message-pp"
            src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2550&q=80"
            alt="profile-pic">
          <div class="message-box-wrapper" style="min-width: 100px; max-width: 350px; overflow-y: hidden;">
            <div class="message-box">
              {{t.received_msg}}
            </div>
            <span>{{ t.received_time }}</span>
          </div>
        </div>
        {% for s1 in s %}
        <div class="message-wrapper reverse">
          <img class="message-pp"
            src="https://images.unsplash.com/photo-1587080266227-677cc2a4e76e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=934&amp;q=80"
            alt="profile-pic">
          <div class="message-box-wrapper">
            <div class="message-box" style="min-width: 100px; max-width: 250px;">
              {% if s1.type == "img" %}
                <img width="200px" src="{{s1.reply}}" alt="" srcset=""> 
              {% elif s1.type == "temp" %}
              <div class="message" align="center">
                  <span class="arrow"></span> <span class="datetime"></span> 
                  <span class="body" id="toup-temp-look" style="opacity: 1;">
                      {% if s1.reply.HEADER %}
                        {% if "http" in s1.reply.HEADER %}
                          <div id="toup-header"><img width="230px" src="{{s1.reply.HEADER}}"> </div>
                          {% else %}
                          <div id="toup-header" style=" font-weight: 900;color: rgba(255,255,255,1); font-size:0.8rem; text-align: left;">{{s1.reply.HEADER}}</div>
                          {% endif %}
                      {% endif %}
                      <div id="toup-body" style="color: rgba(255,255,255,1); text-align: justify; font-size:0.8rem">{{s1.reply.BODY}}</div>
                      <div id="toup-footer" style="font-weight: light; text-align: left;" >{{s1.reply.FOOTER}}</div>
                      <div id="toup-butttons">
                          {% if s1.reply.BUTTONS1 %}
                          <span id="toup-buttton1" style="color: black;" class="btn btn-light">{{s1.reply.BUTTONS1}}</span>
                          {% endif %}{% if s1.reply.BUTTONS1 %}
                          <span id="toup-buttton2" style="color: black;" class="btn btn-light">{{s1.reply.BUTTONS2}}</span>
                          {% endif %}
                        </div>
                  </span>
              </div>
              {% elif s1.type == "pdf" %}
              <a href="{{s1.reply}}" style="color: white; text-decoration: none;" target="_blank">{{s1.name}}</a>
              {% else %}
              {{s1.reply}}
              {% endif %}
            </div>
            <span style="max-width: 130px;">{{s1.time}} <img src="../static/assets/img/{{s1.status}}.png" width="10%" height="10%" alt=""></span>
          </div>
        </div>
        {% endfor %}
        {% endfor %}
      </div>
      
      <form action="" method="get" class="chat-input-wrapper">
        <button type="button" class="chat-attachment-btn options" data-toggle="modal" data-target="#exampleModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
            stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-paperclip"
            viewBox="0 0 24 24">
            <defs />
            <path
              d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48" />
          </svg>
        </button>
        <div class="input-wrapper">
          <input type="text" class="chat-input" name="msg" placeholder="Enter your message here">
          <button type="button" class="emoji-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor"
              stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-smile"
              viewBox="0 0 24 24">
              <defs />
              <circle cx="12" cy="12" r="10" />
              <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01" />
            </svg>
          </button>
        </div>
        <button type="button" class="chat-send-btn" id="send-btn">Send</button>
      </form>
      
    </div>
    
    <div class="app-right-bottom">
      <div class="app-theme-selector">
        <button class="theme-color indigo" data-color="indigo">
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512" title="Indigo">
            <defs />
            <path fill="#fff"
              d="M451.648.356c-25.777 2.712-56.79 19.872-94.811 52.46-68.786 58.958-149.927 160.756-202.185 234-38.158-5.951-78.375 10.368-102.187 40.133C8.758 381.584 45.347 430.34 4.12 473.811c-7.179 7.569-4.618 20.005 4.98 24.114 67.447 28.876 153.664 10.879 194.109-31.768 24.718-26.063 38.167-64.54 31.411-100.762 72.281-55.462 172.147-140.956 228.7-211.885 31.316-39.277 47.208-70.872 48.584-96.59C513.759 22.273 486.87-3.346 451.648.356zM181.443 445.511c-27.362 28.85-87.899 45.654-141.767 31.287 30.12-48.043 4.229-91.124 36.214-131.106 26.246-32.808 79.034-41.993 109.709-11.317 35.839 35.843 19.145 86.566-4.156 111.136zm3.07-148.841c7.354-10.167 18.887-25.865 33.29-44.659l49.22 49.224c-18.125 14.906-33.263 26.86-43.077 34.494-8.842-15.879-22.526-30.108-39.433-39.059zM481.948 55.316c-3.368 63.004-143.842 186.021-191.797 226.621l-53.785-53.79c39.458-49.96 155.261-191.312 218.422-197.954 16.851-1.775 28.03 8.858 27.16 25.123z" />
          </svg>
        </button>
        <button class="theme-color pink" data-color="pink" title="Pink">
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
            <defs />
            <path fill="#fff"
              d="M451.648.356c-25.777 2.712-56.79 19.872-94.811 52.46-68.786 58.958-149.927 160.756-202.185 234-38.158-5.951-78.375 10.368-102.187 40.133C8.758 381.584 45.347 430.34 4.12 473.811c-7.179 7.569-4.618 20.005 4.98 24.114 67.447 28.876 153.664 10.879 194.109-31.768 24.718-26.063 38.167-64.54 31.411-100.762 72.281-55.462 172.147-140.956 228.7-211.885 31.316-39.277 47.208-70.872 48.584-96.59C513.759 22.273 486.87-3.346 451.648.356zM181.443 445.511c-27.362 28.85-87.899 45.654-141.767 31.287 30.12-48.043 4.229-91.124 36.214-131.106 26.246-32.808 79.034-41.993 109.709-11.317 35.839 35.843 19.145 86.566-4.156 111.136zm3.07-148.841c7.354-10.167 18.887-25.865 33.29-44.659l49.22 49.224c-18.125 14.906-33.263 26.86-43.077 34.494-8.842-15.879-22.526-30.108-39.433-39.059zM481.948 55.316c-3.368 63.004-143.842 186.021-191.797 226.621l-53.785-53.79c39.458-49.96 155.261-191.312 218.422-197.954 16.851-1.775 28.03 8.858 27.16 25.123z" />
          </svg>
        </button>
        <button class="theme-color navy-dark active" data-color="navy-dark" title="Navy Dark">
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
            <defs />
            <path fill="#fff"
              d="M451.648.356c-25.777 2.712-56.79 19.872-94.811 52.46-68.786 58.958-149.927 160.756-202.185 234-38.158-5.951-78.375 10.368-102.187 40.133C8.758 381.584 45.347 430.34 4.12 473.811c-7.179 7.569-4.618 20.005 4.98 24.114 67.447 28.876 153.664 10.879 194.109-31.768 24.718-26.063 38.167-64.54 31.411-100.762 72.281-55.462 172.147-140.956 228.7-211.885 31.316-39.277 47.208-70.872 48.584-96.59C513.759 22.273 486.87-3.346 451.648.356zM181.443 445.511c-27.362 28.85-87.899 45.654-141.767 31.287 30.12-48.043 4.229-91.124 36.214-131.106 26.246-32.808 79.034-41.993 109.709-11.317 35.839 35.843 19.145 86.566-4.156 111.136zm3.07-148.841c7.354-10.167 18.887-25.865 33.29-44.659l49.22 49.224c-18.125 14.906-33.263 26.86-43.077 34.494-8.842-15.879-22.526-30.108-39.433-39.059zM481.948 55.316c-3.368 63.004-143.842 186.021-191.797 226.621l-53.785-53.79c39.458-49.96 155.261-191.312 218.422-197.954 16.851-1.775 28.03 8.858 27.16 25.123z" />
          </svg>
        </button>
        <button class="theme-color dark" data-color="dark" title="Dark">
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
            <defs />
            <path fill="currentColor"
              d="M451.648.356c-25.777 2.712-56.79 19.872-94.811 52.46-68.786 58.958-149.927 160.756-202.185 234-38.158-5.951-78.375 10.368-102.187 40.133C8.758 381.584 45.347 430.34 4.12 473.811c-7.179 7.569-4.618 20.005 4.98 24.114 67.447 28.876 153.664 10.879 194.109-31.768 24.718-26.063 38.167-64.54 31.411-100.762 72.281-55.462 172.147-140.956 228.7-211.885 31.316-39.277 47.208-70.872 48.584-96.59C513.759 22.273 486.87-3.346 451.648.356zM181.443 445.511c-27.362 28.85-87.899 45.654-141.767 31.287 30.12-48.043 4.229-91.124 36.214-131.106 26.246-32.808 79.034-41.993 109.709-11.317 35.839 35.843 19.145 86.566-4.156 111.136zm3.07-148.841c7.354-10.167 18.887-25.865 33.29-44.659l49.22 49.224c-18.125 14.906-33.263 26.86-43.077 34.494-8.842-15.879-22.526-30.108-39.433-39.059zM481.948 55.316c-3.368 63.004-143.842 186.021-191.797 226.621l-53.785-53.79c39.458-49.96 155.261-191.312 218.422-197.954 16.851-1.775 28.03 8.858 27.16 25.123z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
  aria-hidden="true" >
  <div class="modal-dialog modal-dialog-centered" role="document" style="max-width: 825px;">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Message Type</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" >
              <div class="col-md-12 col-sm-12">
                  <div class="card card-box">
                      <div class="card-head">
                      </div>
                      <div class="card-body" id="bar-parent">
                          <form action="#" method="POST" id="attachment-form" class="form-horizontal"> {% csrf_token %}
                              <div class="form-group row">
                                <label class="control-label col-md-3">Attach
                                </label>
                                <div class="col-md-5">
                                    <div class="form-check">
                                        <label class="form-check-label">
                                          <input type="radio" class="form-check-input" name="attachment" value="temp" >
                                          Template
                                        </label>
                                    </div>
                                    <div class="form-check">
                                      <label class="form-check-label">
                                          <input type="radio" class="form-check-input" name="attachment" value="image">
                                          Image
                                        </label>
                                    </div>    
                                    <div class="form-check">
                                      <label class="form-check-label">
                                        <input type="radio" class="form-check-input" name="attachment" value='doc'>
                                          Doc
                                        </label>
                                    </div>    
                                    <div class="form-check">
                                      <label class="form-check-label">
                                        <input type="radio" class="form-check-input" name="attachment" value="pdf">
                                        PDF
                                        </label>
                                    </div>    
                                </div>
                              </div>
                              <div class="form-group row" style="display: none;">
                                <label class="control-label col-md-3">Template Name
                                </label>
                                <div class="col-md-5">
                                    <select name="template" class="form-control input-height" id="template">
                                    </select>
                                </div>
                              </div>
                              <div class="form-group row" style="display: none;">
                                <label class="control-label col-md-3">Link
                                </label>
                                <div class="col-md-5">
                                    <input name="link" class="form-control input-height" id="link">
                                </div>
                              </div>
                              
                              <div class="form-actions">
                                  <div class="row">
                                      <div class="offset-md-3 col-md-9">
                                          <button type="button" class="btn btn-primary" id="send-attc">Send</button>
                                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                      </div>
                                  </div>
                              </div>
                          </form>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
  <!-- partial -->
  <script src="{% static 'assets/plugins/jquery/jquery.min.js' %}"></script>
  <script src="{% static './script.js' %} "></script>
  <script>
    function printsome() {
      let sw = document.getElementById("switchStatus")
      sw.checked
    }
    $(document).ready(function(){
      $(".chat-wrapper").scrollTop($(".chat-wrapper")[0].scrollHeight)
      let url = "/fetch_Temp?phone={{from}}";
        $.ajax({
            "async": true,
            "crossDomain": true,
            url: url,
            type: 'GET',
            success: function(res) {
                $.each(res["data"], function(k, v){
                    $("#template").append(`<option value='${v[0]}-${v[1]}'>${v[0]} 
                        [${v[1]}]</option>`);
                })
            }
        });

      $(".form-check-input").on('click', function(){
        let attach = $(this).val();
        var temp = $("#attachment-form").children(".form-group")[1];
        var any_doc = $("#attachment-form").children(".form-group")[2];

        if (attach == "temp") {
            temp.style.display = "";
            any_doc.style.display = "none";  
        }
        else if (attach == "image") {
          temp.style.display = "none";
          any_doc.style.display = "";
          $("#link").attr("placeholder", "Enter Image link here")
        }
        else if (attach == "doc") {
          temp.style.display = "none";
          any_doc.style.display = "";
          $("#link").attr("placeholder", "Enter Document link here")
        }
        else if (attach == "pdf") {
          temp.style.display = "none";
          any_doc.style.display = "";
          $("#link").attr("placeholder", "Enter PDF link here")
            
        }
      })

      


      $("#send-attc").on("click", function(){
        let mes_type = $("input[name='attachment']:checked").val();
        let message;
        if (mes_type == "temp"){
          message = $("#template").val();
        }
        else{
          message = $("#link").val();
        }
        $.ajax({
          type: 'POST',
          url: "/chat_msg",
          processData: false,
          contentType: false,
          csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
          mimeType: 'multipart/form-data',
          data: JSON.stringify({"msg":message, "type":mes_type, "from":'{{provider}}', "to":"{{to}}"}),
          success: function (response) {
              console.log(response['response'])
              location.reload();
          }
      })})

      $("#send-btn").on("click", function(){
        var message = $("input[name='msg']")
        $.ajax({
          type: 'POST',
          url: "/chat_msg",
          processData: false,
          contentType: false,
          csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val(),
          mimeType: 'multipart/form-data',
          data: JSON.stringify({"msg":message.val(), "type":"text", "from":'{{provider}}', "to":"{{to}}"}),
          success: function (response) {
              console.log(response['response'])
              location.reload();
          }
      })
      })
      $("#buttton1").hide();
                    $("#buttton2").hide();
                    console.log(res["temp_look"]);
                    $("#temp-look #header").text("");
                    $("#temp-look #body").text("");
                    $("#temp-look #footer").text("");
                    $("#toup-temp-look #toup-header").text("");
                    $("#toup-temp-look #toup-body").text("");
                    $("#toup-temp-look #toup-footer").text("");
                    $(".datetime").text(res['date_time']);
                    $("#temp-look #butttons #buttton1").text("");
                    $("#temp-look #butttons #buttton2").text("");
                    $("#toup-temp-look #toup-butttons #toup-buttton1").text("");
                    $("#toup-temp-look #toup-butttons #toup-buttton2").text("");
                    $.each(res["temp_look"], function(k, v) {
                        if (k == "HEADER"){
                            $("#header").append(v);
                            $("#toup-header").append(v);
                        }
                        if (k == "BODY"){
                            
                            $("#body").append(v);
                            $("#toup-body").append(v);
                        }
                        if (k == "FOOTER"){
                            $("#footer").append(v);
                            $("#toup-footer").append(v);
                        }
                        if (k == "BUTTONS1"){
                            $("#buttton1").show();
                            $("#toup-buttton1").show();
                            $("#buttton1").text(v);
                            $("#toup-buttton1").text(v);
                        }
                        if (k == "BUTTONS2"){
                            $("#buttton2").show();
                            $("#toup-buttton2").show();
                            $("#buttton2").append(v);
                            $("#toup-buttton2").append(v);
                        }

                    });
    })
  </script>
</body>

</html>